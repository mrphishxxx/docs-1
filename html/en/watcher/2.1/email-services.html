<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuring Watcher to Send Email
        | Elasticsearch Watcher [2.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Watcher [2.1]" /><link rel="up" href="administering-watcher.html" title="Administering Watcher" /><link rel="prev" href="administering-watcher.html" title="Administering Watcher" /><link rel="next" href="configuring-hipchat.html" title="Configuring Watcher to Send Messages to HipChat" /><meta name="DC.type" content="Docs/Watcher/Reference/2.1" /><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png?change=123"><link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png?change=123"><link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png?change=123"><link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png?change=123"><link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png?change=123"><link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png?change=123"><link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png?change=123"><link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png?change=123"><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png?change=123"><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png?change=123"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?change=123"><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png?change=123"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?change=123"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"><meta name="description" content=""/><meta property="og:image" content="/static/img/cluster-small.png"/><link rel="shortcut icon" href="favicon.ico" type="image/x-icon"><link rel="icon" href="favicon.ico?change=123" type="image/x-icon"><link rel="apple-touch-icon-precomposed" sizes="64x64" href="favicon_64x64_16bit.png"><link rel="apple-touch-icon-precomposed" sizes="32x32" href="favicon_32x32.png"><link rel="apple-touch-icon-precomposed" sizes="16x16" href="favicon_16x16.png"><link href="/static/css/main.css" rel="stylesheet"> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><link type="text/css" rel="stylesheet" href="/static/css/prettify.css"/><link type="text/css" rel="stylesheet" href="/static/css/guide.css"/><script type="text/javascript" src="/static/js/prettify.js"></script>
<link rel="stylesheet" type="text/css" href="styles.css" />

</head><body><script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script><header class="header-wrapper"><div class="navigation-wrapper"><div class="container"><nav class="navbar"><div class="navbar-mobile-header navbar-header mr-20 mr-xs-0"><div class="row hidden-sm hidden-md hidden-lg"><div class="col-xs-5 hidden-sm hidden-md hidden-lg"><div class="navbar-mobile-header-icon navbar-mobile-header-icon-out"><span></span><span></span><span></span></div> <a href="/learn" class="nav-title hidden-sm hidden-md hidden-lg m-l-10">Learn</a></div><div class="col-xs-2 text-center"><div class="navbar-brand" id="elastic"><h1> <a class="logo-m hidden-sm hidden-md hidden-lg" href="/"><img src="/assets/blt65c71c1236219a27/elastic-logo-mobile.svg" alt="elastic-logo-mobile"></a></h1></div></div><div class="col-xs-5 hidden-sm hidden-md hidden-lg text-right"><ul class="menu-m hidden-sm hidden-md hidden-lg"><li class=""><a class="icon-contact" href="/contact"></a></li><li id="searchbar"><a class="button icon" href="#"></a></li><li class="lang global-language"><a href="#">EN</a><ul class="language-list"><li><a href="/">English</a></li><li><a href="/fr/">français</a></li><li><a href="/de/">Deutsche</a></li><li><a href="/jp/">日本語</a></li><li><a href="/kr/">한국어</a></li></ul></li></ul></div></div><div class="navbar-brand hidden-xs" id="elastic"><h1> <a class="hidden-xs" id="elastic-logo" href="/"><img src="/assets/blt49aa5273c3bf983b/elastic-logo.svg" alt="elastic-logo"></a></h1></div></div><div class="collapse navbar-collapse mobile-inner-nav"><nav class="nav navbar-nav primary-nav-hover" id="nav"><ul><li> <a id="nav_products" class="  nav-item" href="/products">Products</a><div class="text-center quaternary-nav hidden-xs hover-nav"><div class="container"><div class="p-t-b-5"><ul class="list-inline nav-group"><li> <a href="/products/elasticsearch">Elasticsearch</a></li><li> <a href="/cloud">Elasticsearch as a Service</a></li><li> <a href="/products/logstash">Logstash</a></li><li> <a href="/products/kibana">Kibana</a></li><li> <a href="/products/beats">Beats</a></li><li> <a href="/products/watcher">Watcher</a></li><li> <a href="/products/shield">Shield</a></li><li> <a href="/products/marvel">Marvel</a></li><li> <a href="/products/graph">Graph</a></li><li> <a href="/products/reporting">Reporting</a></li><li> <a href="/products/hadoop">Hadoop</a></li></ul></div></div></div><ul class="hidden-sm hidden-md hidden-lg sub-navigation"><li><a id="nav_elasticsearch" href="/products/elasticsearch">Elasticsearch</a></li><li><a id="nav_elasticsearch as a service" href="/cloud">Elasticsearch as a Service</a></li><li><a id="nav_logstash" href="/products/logstash">Logstash</a></li><li><a id="nav_kibana" href="/products/kibana">Kibana</a></li><li><a id="nav_beats" href="/products/beats">Beats</a></li><li><a id="nav_watcher" href="/products/watcher">Watcher</a></li><li><a id="nav_shield" href="/products/shield">Shield</a></li><li><a id="nav_marvel" href="/products/marvel">Marvel</a></li><li><a id="nav_graph" href="/products/graph">Graph</a></li><li><a id="nav_reporting" href="/products/reporting">Reporting</a></li><li><a id="nav_hadoop" href="/products/hadoop">Hadoop</a></li></ul></li><li> <a id="nav_cloud" class="  nav-item" href="/cloud">Cloud</a><div class="text-center quaternary-nav hidden-xs hover-nav"><div class="container"><div class="p-t-b-5"><ul class="list-inline nav-group"><li> <a href="/cloud/subscriptions">Subscriptions</a></li><li> <a href="/cloud/pricing">Pricing</a></li><li> <a href="/cloud/support">Support</a></li></ul></div></div></div><ul class="hidden-sm hidden-md hidden-lg sub-navigation"><li><a id="nav_subscriptions" href="/cloud/subscriptions">Subscriptions</a></li><li><a id="nav_pricing" href="/cloud/pricing">Pricing</a></li><li><a id="nav_support" href="/cloud/support">Support</a></li></ul></li><li> <a id="nav_services" class="  nav-item" href="/services">Services</a></li><li> <a id="nav_customers" class="  nav-item" href="/use-cases">Customers</a></li><li> <a id="nav_learn" class="active nav-item" href="/learn">Learn</a><div class="text-center quaternary-nav hidden-xs hover-nav"><div class="container"><div class="p-t-b-5"><ul class="list-inline nav-group"><li> <a href="/community">Community</a></li><li> <a href="/guide">Docs</a></li><li> <a href="/blog">Blog</a></li><li> <a href="/videos">Videos</a></li><li> <a href="https://discuss.elastic.co/">Forums</a></li><li> <a href="/elasticon">Elastic{ON}</a></li></ul></div></div></div><ul class="hidden-sm hidden-md hidden-lg sub-navigation"><li><a id="nav_community" href="/community">Community</a></li><li><a id="nav_docs" href="/guide">Docs</a></li><li><a id="nav_blog" href="/blog">Blog</a></li><li><a id="nav_videos" href="/videos">Videos</a></li><li><a id="nav_forums" href="https://discuss.elastic.co/">Forums</a></li><li><a id="nav_elastic{on}" href="/elasticon">Elastic{ON}</a></li></ul></li></ul></nav><nav class="nav navbar-nav navbar-right hidden-xs"><ul><li class="hidden-xs hidden-sm"><a href="/downloads">Downloads</a></li><li class="hidden-xs hidden-md hidden-lg"><a class="icon-download" href="/downloads"></a></li><li class="hidden-xs hidden-sm"><a class="btn btn-primary btn-contact" href="/contact">Contact</a></li><li class="hidden-xs hidden-md hidden-lg"><a class="icon-contact" href="/contact"></a></li><li class="hidden-xs" id="searchbar"><a class="button icon" href="#"></a></li><li class="hidden-xs lang global-language"><a href="#">EN</a><ul class="language-list"><li><a class="" href="/">English</a></li><li><a class="" href="/fr/">français</a></li><li><a class="" href="/de/">Deutsche</a></li><li><a class="" href="/jp/">日本語</a></li><li><a class="" href="/kr/">한국어</a></li></ul></li></ul></nav></div></nav></div></div><div class="header-search-wrapper open-search"><div class="container"><div class="big-search"><i class="big-search-icon"></i><form id="searchfrm" name="searchForm" autocomplete="on" action="/search" method="get"><ul class="tags-wrapper"><li class="search-field"><input type="text" name="q" id="autocomplete" class="form-control global-input" autocomplete="off"></li></ul></form><a class="header-search-cancel" href="#"></a></div><div class="nav-auto-complete"></div></div></div><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script>
$(window).load(function () {
  $(".navbar-mobile-header-icon").click(function(index){
    $('.navigation-wrapper').toggleClass('menu-overlay');
    $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
    $(".mobile-inner-nav").slideToggle(500);
    $('.mobile-inner-nav .sub-navigation').css('display','none');
    $(".mobile-inner-nav a").each(function( index ) {
      $(this).css({'animation-delay': (index/25)+'s'});
    });
  });

  if($(window).width() < 769){
    $(".nav-item").click(function(e){
      e.preventDefault();
      var parent = $(this).parent();
      $('.sub-navigation',parent).slideToggle(250);
    })
  }
});
</script></header><style> 
    
      .m-shortcuts li a.m-search {
        background: url("/assets/blt78ef101d1c58b693/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-docs {
        background: url("/assets/blt8c2d02cd42735ac3/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-contact {
        background: url("/assets/blte4c9f7f37cf09587/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
      
</style><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script type="text/javascript" src="/static/js/nav-v5.js"></script><script type="text/javascript">
  $(document).ready( function(){
    $('.navbar-toggle').on('click', function(){
      $('.mobile-navigation, .menu-open').hide();
      $('.navigation-wrapper').addClass('mobile-navigation');
      $('.navbar').addClass('menu-open');
      $('.menu-close').show();
    });
    $('.menu-close').on('click', function(){
      $('.navigation-wrapper').removeClass('mobile-navigation');
      $('.navbar').removeClass('menu-open');
      $('.menu-close').hide();
      console.log("close");
    });

    // $(".mobile-inner-header-icon").click(function(){
    //   $(this).toggleClass("mobile-inner-header-icon-click mobile-inner-header-icon-out");
    //   $(".mobile-inner-nav").slideToggle(250);
    //   $(".navigation-wrapper").toggleClass('mobile-menu');
    //   if ($('.mobile-inner-header-icon-click').is(":visible")) {
    //     $('.menu-m').css({'display':"none"});
    //   }else{
    //     $('.menu-m').css({'display':"table-cell"});
    //   }
    // });
    // $(".mobile-inner-nav a").each(function( index ) {
    //   $( this ).css({'animation-delay': (index/10)+'s'});
    //   // $(".navigation-wrapper").removeClass('mobile-menu');
    // });
  });
</script><div class="tertiary-nav"><div class="container"><div class="p-t-b-13 bdr-btm-e7e7e7 clearfix"><div class="breadcrum-wrapper pull-left text-left"> <a href="/learn">Learn</a> <span>Docs</span></div></div></div></div><div class="nav-mobile-dropdown hidden-sm hidden-md hidden-lg clearfix"><div class="container"><div class="breadcrum-wrapper pull-left text-left"> <a class="dropdown-btn" href="javascript:void(0)">Docs</a></div></div></div><div class="main-container"><section id="content"><div class="content-wrapper">
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="page_header"><b>PLEASE NOTE:</b>
<br/>
This page is for an older version of the software. Check out the <a href="../current/index.html">latest
version&#39;s documentation here</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Watcher
      [2.1]
    </a></span> » <span class="breadcrumb-link"><a href="administering-watcher.html">Administering Watcher</a></span> » <span class="breadcrumb-node">Configuring Watcher to Send Email</span></div><div class="navheader"><span class="prev"><a href="administering-watcher.html">
              « 
              Administering Watcher</a>
           
        </span><span class="next">
           
          <a href="configuring-hipchat.html">Configuring Watcher to Send Messages to HipChat
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="email-services"></a>Configuring Watcher to Send Email</h2></div></div></div><p>You can configure Watcher to send email from any SMTP email service. Email messages can contain
basic HTML tags. You can control which tags are allowed by
<a class="link" href="email-services.html#email-html-sanitization" title="Configuring HTML Sanitization Options">Configuring HTML Sanitization Options</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="email-account"></a>Configuring Email Accounts</h3></div></div></div><p>You configure the accounts Watcher can use to send email in your <code class="literal">elasticsearch.yml</code> configuration file.
Each account configuration has a unique name and specifies all of the SMTP information needed
to send email from that account. You can also specify defaults for all emails that are sent through
the account. For example, you can set defaults for the <code class="literal">from</code> and <code class="literal">bcc</code> fields to ensure that all
emails are sent from the same address and always blind copied to the same address.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>If your email account is configured to require two step verification,
            you need to generate and use a unique App Password to send email from
            Watcher. Authentication will fail if you use your primary password.</p></div></div><p>If you configure multiple email accounts, you specify which account the email should be sent
with in the <a class="link" href="actions.html#actions-email" title="Email Action">email</a> action. If there is only one account configured, you
do not have to specify the <code class="literal">account</code> attribute in the action definition. However, if you configure
multiple accounts and omit the <code class="literal">account</code> attribute, there is no guarantee which account will be
used to send the email.</p><p>To add an email account, set the <code class="literal">watcher.actions.email.service.account</code> property in
<code class="literal">elasticsearch.yml</code>. See <a class="link" href="email-services.html#email-account-attributes" title="Table 1. Email Account Attributes">Email Account Attributes</a> for the
supported attributes.</p><p>For example, the following snippet configures a single Gmail account named <code class="literal">work</code>.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">watcher.actions.email.service.account:
    work:
        profile: gmail
        email_defaults:
            from: 'John Doe &lt;john.doe@host.domain&gt;'
            bcc: archive@host.domain
        smtp:
            auth: true
            starttls.enable: true
            host: smtp.gmail.com
            port: 587
            user: &lt;username&gt;
            password: &lt;password&gt;</pre></div><p><a id="email-profile"></a>The <span class="emphasis"><em>email profile</em></span> defines a strategy for building a MIME message. As with almost every standard
out there, different email systems interpret the MIME standard differently and have slightly
different ways of structuring MIME messages. Watcher provides three email profiles: <code class="literal">standard</code>
(default), <code class="literal">gmail</code>, and <code class="literal">outlook</code>.</p><p>If you are using Gmail or Outlook, we recommend using the corresponding profile. Use the <code class="literal">standard</code>
profile if you are using some other email system. For more information about configuring Watcher
to work with different email systems, see:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="email-services.html#gmail" title="Sending Email From Gmail">Sending Email from Gmail</a>
</li><li class="listitem">
<a class="link" href="email-services.html#outlook" title="Sending Email from Outlook.com">Sending Email from Outlook</a>
</li><li class="listitem">
<a class="link" href="email-services.html#exchange" title="Sending Email from Microsoft Exchange">Sending Email from Exchange</a>
</li><li class="listitem">
<a class="link" href="email-services.html#amazon-ses" title="Sending Email from Amazon SES (Simple Email Service)">Sending Email from Amazon SES</a>
</li></ul></div><div class="table"><a id="email-account-attributes"></a><p class="title"><strong>Table 1. Email Account Attributes</strong></p><div class="table-contents"><table summary="Email Account Attributes" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top"> Name                       </th><th align="left" valign="top"> Required   </th><th align="left" valign="top"> Default  </th><th align="left" valign="top"> Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">profile</code></p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>standard</p></td><td align="left" valign="top"><p>The <a class="link" href="email-services.html#email-profile">profile</a> to use to
                                                       build the MIME messages that are sent from
                                                       the account. Valid values: <code class="literal">standard</code>
                                                       (default), <code class="literal">gmail</code> and <code class="literal">outlook</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">email_defaults.*</code></p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>An optional set of email attributes to use
                                                       as defaults for the emails sent from the
                                                       account. See <a class="link" href="actions.html#email-action-attributes" title="Table 11. Email Action Attributes">Email Action Attributes</a> for the supported
                                                       attributes. for the possible email
                                                       attributes)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">smtp.auth</code></p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>false</p></td><td align="left" valign="top"><p>When <code class="literal">true</code>, attempt to authenticate the
                                                       user using the AUTH command.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">smtp.host</code></p></td><td align="left" valign="top"><p>yes</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The SMTP server to connect to.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">smtp.port</code></p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>25</p></td><td align="left" valign="top"><p>The SMTP server port to connect to.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">smtp.user</code></p></td><td align="left" valign="top"><p>yes</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The user name for SMTP.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">smtp.password</code></p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The password for the specified SMTP user.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">smtp.starttls.enable</code></p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>false</p></td><td align="left" valign="top"><p>When <code class="literal">true</code>, enables the use of the
                                                       <code class="literal">STARTTLS</code> command (if supported by
                                                       the server) to switch the connection to a
                                                       TLS-protected connection before issuing any
                                                       login commands. Note that an appropriate
                                                       trust store must configured so that the
                                                       client will trust the server’s certificate.
                                                       Defaults to <code class="literal">false</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">smtp.*</code></p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>SMTP attributes that enable fine control
                                                       over the SMTP protocol when sending messages.
                                                       See <a class="ulink" href="https://javamail.java.net/nonav/docs/api/com/sun/mail/smtp/package-summary.html" target="_top">com.sun.mail.smtp</a>
                                                       for the full list of SMTP properties you can
                                                       set.</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="gmail"></a>Sending Email From Gmail</h4></div></div></div><p>Use the following email account settings to send email from the <a class="ulink" href="https://mail.google.com" target="_top">Gmail</a>
SMTP service:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">watcher.actions.email.service.account:
    gmail_account:
        profile: gmail
        smtp:
            auth: true
            starttls.enable: true
            host: smtp.gmail.com
            port: 587
            user: &lt;username&gt;
            password: &lt;password&gt;</pre></div><p>If you get an authentication error that indicates that you need to continue the
sign-in process from a web browser when Watcher attempts to send email, you need
to configure Gmail to <a class="ulink" href="https://support.google.com/accounts/answer/6010255?hl=en" target="_top">Allow Less
Secure Apps to access your account</a>.</p><p>If two-step verification is enabled for your account, you must generate and use
a unique App Password to send email from Watcher.See
<a class="ulink" href="https://support.google.com/accounts/answer/185833?hl=en" target="_top">Sign in using App Passwords</a>
for more information.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="outlook"></a>Sending Email from Outlook.com</h4></div></div></div><p>Use the following email account settings to send email action from the
<a class="ulink" href="https://www.outlook.com/" target="_top">Outlook.com</a> SMTP service:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">watcher.actions.email.service.account:
    outlook_account:
        profile: outlook
        smtp:
            auth: true
            starttls.enable: true
            host: smtp-mail.outlook.com
            port: 587
            user: &lt;username&gt;
            password: &lt;password&gt;</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>You need to use a unique App Password if two-step verification is enabled.
        See <a class="ulink" href="http://windows.microsoft.com/en-us/windows/app-passwords-two-step-verification" target="_top">App
        passwords and two-step verification</a> for more information.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="amazon-ses"></a>Sending Email from Amazon SES (Simple Email Service)</h4></div></div></div><p>Use the following email account settings to send email from the
<a class="ulink" href="http://aws.amazon.com/ses" target="_top">Amazon Simple Email Service</a> (SES) SMTP service:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">watcher.actions.email.service.account:
    ses_account:
        smtp:
            auth: true
            starttls.enable: true
            starttls.required: true
            host: email-smtp.us-east-1.amazonaws.com <a id="CO9-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
            port: 587
            user: &lt;username&gt;
            password: &lt;password&gt;</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO9-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">smtp.host</code> varies depending on the region
</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>You need to use your Amazon SES SMTP credentials to send email through
        Amazon SES. For more information, see <a class="ulink" href="http://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-credentials.html" target="_top">Obtaining Your Amazon SES SMTP Credentials</a>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="exchange"></a>Sending Email from Microsoft Exchange</h4></div></div></div><p>Use the following email account settings to send email action from Microsoft Exchange:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">watcher.actions.email.service.account:
    exchange_account:
        profile: outlook
        email_defaults:
            from: &lt;email address of service account&gt; <a id="CO10-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        smtp:
            auth: true
            starttls.enable: true
            host: &lt;your exchange server&gt;
            port: 587
            user: &lt;email address of service account&gt; <a id="CO10-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
            password: &lt;password&gt;</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Some organizations configure Exchange to validate that the <code class="literal">from</code> field is a
    valid local email account.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Many organizations support use of your email address as your username, though
    it is a good idea to check with your system administrator if you receive
    authentication-related failures.
</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="email-html-sanitization"></a>Configuring HTML Sanitization Options</h3></div></div></div><p>The <code class="literal">email</code> action supports sending messages with an HTML body. However, for security reasons,
Watcher <a class="ulink" href="https://en.wikipedia.org/wiki/HTML_sanitization" target="_top">sanitizes</a> the HTML.</p><p>You can control which HTML features are allowed or disallowed by configuring the
<code class="literal">watcher.actions.email.html.sanitization.allow</code> and
<code class="literal">watcher.actions.email.html.sanitization.disallow</code> settings in <code class="literal">elasticsearch.yml</code>. You can specify
individual HTML elements and the feature groups described in the following table. By default,
Watcher allows the following features: <code class="literal">body</code>, <code class="literal">head</code>, <code class="literal">_tables</code>, <code class="literal">_links</code>, <code class="literal">_blocks</code>, <code class="literal">_formatting</code>
and <code class="literal">img:embedded</code>.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top"> Name                       </th><th align="left" valign="top"> Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">_tables</code></p></td><td align="left" valign="top"><p>All table related elements: <code class="literal">&lt;table&gt;</code>, <code class="literal">&lt;th&gt;</code>, <code class="literal">&lt;tr&gt;</code> and <code class="literal">&lt;td&gt;</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">_blocks</code></p></td><td align="left" valign="top"><p>The following block elements: <code class="literal">&lt;p&gt;</code>, <code class="literal">&lt;div&gt;</code>, <code class="literal">&lt;h1&gt;</code>, <code class="literal">&lt;h2&gt;</code>, <code class="literal">&lt;h3&gt;</code>,
                               <code class="literal">&lt;h4&gt;</code>, <code class="literal">&lt;h5&gt;</code>, <code class="literal">&lt;h6&gt;</code>, <code class="literal">&lt;ul&gt;</code>, <code class="literal">&lt;ol&gt;</code>, <code class="literal">&lt;li&gt;</code> and <code class="literal">&lt;blockquote&gt;</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">_formatting</code></p></td><td align="left" valign="top"><p>The following inline formatting elements: <code class="literal">&lt;b&gt;</code>, <code class="literal">&lt;i&gt;</code>, <code class="literal">&lt;s&gt;</code>, <code class="literal">&lt;u&gt;</code>,
                               <code class="literal">&lt;o&gt;</code>, <code class="literal">&lt;sup&gt;</code>, <code class="literal">&lt;sub&gt;</code>, <code class="literal">&lt;ins&gt;</code>, <code class="literal">&lt;del&gt;</code>, <code class="literal">&lt;strong&gt;</code>, <code class="literal">&lt;strike&gt;</code>,
                               <code class="literal">&lt;tt&gt;</code>, <code class="literal">&lt;code&gt;</code>, <code class="literal">&lt;big&gt;</code>, <code class="literal">&lt;small&gt;</code>, <code class="literal">&lt;br&gt;</code>, <code class="literal">&lt;span&gt;</code> and <code class="literal">&lt;em&gt;</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">_links</code></p></td><td align="left" valign="top"><p>The <code class="literal">&lt;a&gt;</code> element with an <code class="literal">href</code> attribute that points to a URL using
                               the following protocols: <code class="literal">http</code>, <code class="literal">https</code> and <code class="literal">mailto</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">_styles</code></p></td><td align="left" valign="top"><p>The <code class="literal">style</code> attribute on all elements. Note that CSS attributes
                               are also sanitized to prevent XSS attacks.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">img</code> or <code class="literal">img:all</code></p></td><td align="left" valign="top"><p>All images (external and embedded).</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">img:embedded</code></p></td><td align="left" valign="top"><p>Only embedded images. Embedded images can only use the <code class="literal">cid:</code> URL
                               protocol in their <code class="literal">src</code> attribute.</p></td></tr></tbody></table></div><p>For example, the following settings allow the HTML to contain tables and block elements, but
disallow  <code class="literal">&lt;h4&gt;</code>, <code class="literal">&lt;h5&gt;</code> and <code class="literal">&lt;h6&gt;</code> tags.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">watcher.actions.email.html.sanitization:
    allow: _tables, _blocks
    disallow: h4, h5, h6</pre></div><p>To disable sanitization entirely, add the following setting to <code class="literal">elasticsearch.yml</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">watcher.actions.email.html.sanitization.enabled: false</pre></div></div></div><div class="navfooter"><span class="prev"><a href="administering-watcher.html">
              « 
              Administering Watcher</a>
           
        </span><span class="next">
           
          <a href="configuring-hipchat.html">Configuring Watcher to Send Messages to HipChat
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
         class="col-xs-12 col-sm-4 col-md-4"><h3>Top Videos</h3><ul><li><a href="https://www.elastic.co/webinars/elasticsearch-2-0-overview?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li><li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li><li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li></ul><hr/></div></div></div></section></div><script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script><div class="subscribe-wrapper"><div class="container text-left"><div class="subscribe-title"><h5>Be in the know with the latest and greatest from Elastic.</h5></div><div class="subscribe-form"><form id="mktoForm_1398" class="mktoForm sb-form"></form><div class="form_thanks hide"><p>Thanks for subscribing! We'll keep you updated with new releases.</p></div></div></div></div><footer class="footer-wrapper"><div class="container"><div class="row footer-content"><div class="col-xs-6 col-sm-3 col-md-3"><h3><a href="/products">Products</a></h3><ul><li><a href="/products/elasticsearch">Elasticsearch</a></li><li><a href="/products/kibana">Kibana</a></li><li><a href="/products/logstash">Logstash</a></li><li><a href="/products/beats">Beats</a></li><li><a href="/cloud">Elastic Cloud</a></li><li><a href="/products/shield">Shield (Security)</a></li><li><a href="/products/watcher">Watcher (Alerting)</a></li><li><a href="/products/marvel">Marvel (Monitoring)</a></li><li><a href="/products/graph">Graph</a></li><li><a href="/products/reporting">Reporting</a></li><li><a href="/products/hadoop">ES-Hadoop</a></li></ul></div><div class="col-xs-6 col-sm-3 col-md-3"><h3>Resources</h3><ul><li><a href="/blog">Blog</a></li><li><a href="/community">Community</a></li><li><a href="/use-cases">Customers & Use Cases</a></li><li><a href="/guide">Documentation</a></li><li><a href="/elasticon">Elastic{ON} Events</a></li><li><a href="https://discuss.elastic.co/">Forums</a></li><li><a href="/community/meetups">Meetups</a></li><li><a href="https://support.elastic.co">Support Portal/Login</a></li><li><a href="/videos">Videos & Webinars</a></li><li><a href="/training">Training</a></li></ul></div><div class="col-xs-6 col-sm-3 col-md-3"><h3><a href="/about">About</a></h3><ul><li><a href="/about/careers">Careers</a></li><li><a href="/contact">Contact</a></li><li><a href="/about/leadership">Leadership</a></li><li><a href="/about/partners">Partners</a></li><li><a href="/about/press">Press</a></li></ul></div><div class="col-xs-6 col-sm-3 col-md-3"><h3>Language</h3><ul><li><a href="/">English</a></li><li><a href="/fr">French</a></li><li><a href="/de">German</a></li><li><a href="/jp">Japanese</a></li><li><a href="/kr">Korean</a></li></ul></div></div><div class="row social-icon"><div class="col-xs-12 col-sm-12 col-md-12"><ul><li class="facebook"><a target="_blank" id="footer_facebook" href="http://www.facebook.com/elastic.co" target="_blank"></a></li><li class="twitter"><a target="_blank" id="footer_twitter" href="https://www.twitter.com/elastic" target="_blank"></a></li><li class="linkedin"><a target="_blank" id="footer_linkedin" href="https://www.linkedin.com/company/elastic-co" target="_blank"></a></li><li class="xing"><a target="_blank" id="footer_xing" href="https://www.xing.com/companies/elastic.co" target="_blank"></a></li><li class="youtube"><a target="_blank" id="footer_youtube" href="https://www.youtube.com/user/elasticsearch" target="_blank"></a></li></ul></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="copyright"><ul><li><a href="/legal/trademarks">Trademarks</a></li><li><a href="" legal="" terms-of-use"="">Terms of Use</a></li><li><a href="" legal="" privacy-policy"="">Privacy</a></li><li><a href="" legal="" privacy-and-cookie-policy"="">Cookie Policy</a></li><li><a href="/brand">Brand</a></li></ul><div class="copyright-content"><div class="footer-logo"><a href="#"><img src="/static/images/elastic-logo-H-full color.png" class="img-responsive"></a></div><div class="footer-text"><p>© 2016. All Rights Reserved - Elasticsearch</p><p>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</p><p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other countries.</p></div></div></div></div></div></div></footer><style type="text/css">
		
			.facebook{background:url("/assets/bltf66b1b8a624e81b2/facebook.svg") no-repeat;}		
		
			.twitter{background:url("/assets/blt0c27fbeba1f2b85b/twitter.svg") no-repeat;}		
		
			.linkedin{background:url("/assets/blt7890ae949fd3873f/linkedin.svg") no-repeat;}		
		
			.xing{background:url("/assets/blt0d0981773de2643c/xing.svg") no-repeat;}		
		
			.youtube{background:url("/assets/blt891f87ea1aa18977/youtube.svg") no-repeat;}		
		
	</style><script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
  form.onSuccess(function(form){
    $('#mktoForm_1398').css('display','none');
    $('#subscribe-newsletter header').hide();
    $('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
    dataLayer.push({'event': 'mktoFormSubmit'});
      return false;
    });
});
</script><script src="/static/js/jquery.min.js"></script><script src="/static/js/bootstrap.min.js"></script><script src="/static/js/jquery.autocomplete.js"></script><script src="/static/js/script.js"></script></section></div><script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script><script src="/static/js/jquery.cookie.js"></script><style></style><script type="text/javascript">
       $(document).ready(function(){
        $('.dropdown-btn').on('click', function(){
          myFunction();
        });
         function myFunction() {
            // document.getElementById("myDropdown").classList.toggle("show");
            $('#myDropdown').toggleClass('show');
        }

        // Close the dropdown menu if the user clicks outside of it
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {

            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
       });
     </script>
            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        